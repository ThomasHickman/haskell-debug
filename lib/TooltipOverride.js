"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class TooltipOverride {
    constructor(resolveExpression) {
        this.resolveExpression = resolveExpression;
    }
    async tooltipHandler(editor, crange) {
        let range = crange;
        if (range.isEmpty()) {
            range = editor.bufferRangeForScopeAtPosition('identifier.haskell', range.start);
        }
        if (!range || range.isEmpty()) {
            return undefined;
        }
        const debugValue = await this.resolveExpression(editor.getTextInBufferRange(range));
        if (debugValue !== undefined) {
            return { range, text: debugValue };
        }
        return undefined;
    }
}
exports.TooltipOverride = TooltipOverride;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVG9vbHRpcE92ZXJyaWRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL1Rvb2x0aXBPdmVycmlkZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUdBO0lBQ0UsWUFBb0IsaUJBQXNFO1FBQXRFLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBcUQ7SUFDMUYsQ0FBQztJQUVNLEtBQUssQ0FBQyxjQUFjLENBQUMsTUFBNEIsRUFBRSxNQUF1QjtRQUUvRSxJQUFJLEtBQUssR0FBZ0MsTUFBTSxDQUFBO1FBQy9DLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDcEIsS0FBSyxHQUFHLE1BQU0sQ0FBQyw2QkFBNkIsQ0FBQyxvQkFBb0IsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDakYsQ0FBQztRQUNELEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDOUIsTUFBTSxDQUFDLFNBQVMsQ0FBQTtRQUNsQixDQUFDO1FBQ0QsTUFBTSxVQUFVLEdBQUcsTUFBTSxJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTSxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUE7UUFDbkYsRUFBRSxDQUFDLENBQUMsVUFBVSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDN0IsTUFBTSxDQUFDLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsQ0FBQTtRQUNwQyxDQUFDO1FBQ0QsTUFBTSxDQUFDLFNBQVMsQ0FBQTtJQUNsQixDQUFDO0NBQ0Y7QUFuQkQsMENBbUJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQXRvbVR5cGVzIGZyb20gJ2F0b20nXG5pbXBvcnQgKiBhcyBVUEkgZnJvbSAnYXRvbS1oYXNrZWxsLXVwaSdcblxuZXhwb3J0IGNsYXNzIFRvb2x0aXBPdmVycmlkZSB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVzb2x2ZUV4cHJlc3Npb246IChleHByZXNzaW9uOiBzdHJpbmcpID0+IFByb21pc2U8c3RyaW5nIHwgdW5kZWZpbmVkPikge1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHRvb2x0aXBIYW5kbGVyKGVkaXRvcjogQXRvbVR5cGVzLlRleHRFZGl0b3IsIGNyYW5nZTogQXRvbVR5cGVzLlJhbmdlKVxuICAgIDogUHJvbWlzZTxVUEkuSVRvb2x0aXBEYXRhIHwgdW5kZWZpbmVkPiB7XG4gICAgbGV0IHJhbmdlOiBBdG9tVHlwZXMuUmFuZ2UgfCB1bmRlZmluZWQgPSBjcmFuZ2VcbiAgICBpZiAocmFuZ2UuaXNFbXB0eSgpKSB7XG4gICAgICByYW5nZSA9IGVkaXRvci5idWZmZXJSYW5nZUZvclNjb3BlQXRQb3NpdGlvbignaWRlbnRpZmllci5oYXNrZWxsJywgcmFuZ2Uuc3RhcnQpXG4gICAgfVxuICAgIGlmICghcmFuZ2UgfHwgcmFuZ2UuaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICAgIGNvbnN0IGRlYnVnVmFsdWUgPSBhd2FpdCB0aGlzLnJlc29sdmVFeHByZXNzaW9uKGVkaXRvci5nZXRUZXh0SW5CdWZmZXJSYW5nZShyYW5nZSkpXG4gICAgaWYgKGRlYnVnVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHsgcmFuZ2UsIHRleHQ6IGRlYnVnVmFsdWUgfVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cbn1cbiJdfQ==